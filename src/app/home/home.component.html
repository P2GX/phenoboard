<div class="max-w-4xl mx-auto mt-10 p-6 bg-white shadow-lg rounded-lg space-y-6">
    <h1 class="text-3xl font-bold text-gray-800">GA4GH Phenoboard</h1>

    <p class="text-gray-600 text-base leading-relaxed">
    This application supports the biocuration of GA4GH Phenopackets.
    </p>

    <div class="flex flex-col space-y-4">
    <div class="flex items-center gap-3">
      <div class="relative group">
    <button
        (click)="loadHpo()"
        class="btn-outline-primary w-[300px]"
    >Load HPO
    </button>
    <!-- Tooltip -->
    <div
      class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 pointer-events-none text-center"
    >
      Select the hp.json file
    </div>
     <app-help-button 
        title="Loading the HPO Ontology"
        [lines]="[
          'Download the latest HPO ontology file (hp.json) to your file system.',
          'Make sure to download the hp.json file (and <i>not</i> OBO or OWL).',
          'The file can be downloaded from https://hpo.jax.org/data/ontology.',
          'After you have downloaded the hp.json file, choose the file using the dialog that opens when you click on the <b>Load HPO</b> button.'
        ]" />
    </div>
    <span [ngClass]="{'text-red-600': hpoLoading() }"
      class="text-sm text-gray-500 italic">
      {{ hpoMessage() }}
      @if (status().hpoLoaded ) {
        <span>({{ status().nHpoTerms }} terms)</span>
      }
    </span>
</div>

<div class="flex items-center gap-3">
  <div class="relative group">
    <button
      (click)="chooseExistingTemplateFile()"
      [disabled]="!status().hpoLoaded"
      class="btn-outline-primary w-[300px]"
    >
      {{ 'Select phetools (legacy) template file' }}
    </button>
    <app-help-button 
        title="Loading the HPO Ontology"
        [lines]="[
          'For use by internal HPO team for migrating original pyphetools files.'
        ]" />

    <!-- Tooltip -->
    <div
      class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 pointer-events-none text-center"
    >
      Select a phetools template file (enabled after HPO is loaded)
    </div>
  </div>

  <span class="text-sm text-gray-500 italic">{{ templateFileMessage() }}</span>
  @if (isRunning){
    <div style="margin-top: 20px;">
      <mat-progress-bar mode="determinate" [value]="progressValue"></mat-progress-bar>
      <p>{{ progressValue }} %</p>
    </div>
  }
   <div class="ml-auto">
    <mat-checkbox [(ngModel)]="updateLabels">
      Update HPO labels
    </mat-checkbox>
  </div>
</div>

<div class="flex items-center gap-3">
  <div class="relative group">
    <button
      (click)="chooseJsonTemplateFile()"
      [disabled]="!status().hpoLoaded"
      class="btn-outline-primary w-[300px]"
    >
      {{ 'Select phetools JSON file' }}
    </button>
     <app-help-button 
        title="JSON Cohort files"
        [lines]="[
          'Open a phenoboard cohort file (JSON format).',
          'Each row of of a phenoboard cohort file corresponds to one individual (one phenopacket).'
        ]" />

    <!-- Tooltip -->
    <div
      class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 pointer-events-none text-center"
    >
      Select a phetools JSON template file (enabled after HPO is loaded)
    </div>
  </div>

  <span class="text-sm text-gray-500 italic">{{ jsonTemplateFileMessage() }}</span>

</div>

<div class="flex items-center gap-3">
  <div class="relative group">
    <button
        (click)="createNewPhetoolsTemplate()"
        [disabled]="!status().hpoLoaded"
        class="btn-outline-primary w-[300px]"
    >Create new cohort
    </button>
    <!-- Tooltip -->
    <app-help-button 
        title="Create new cohort"
        [lines]="[
          'Use this button to start a new template (Mendelian, Melded, or Digenic). '
        ]" />
    </div>
    <span class="text-sm text-gray-500 italic">{{ newTemplateMessage }}</span>
</div>

<div class="flex items-center gap-3">
  <div class="relative group">
    <button
        (click)="setBiocuratorOrcid()"
        class="btn-outline-primary w-[300px]"
    >Set biocurator ORCID
    </button>
    <app-help-button 
        title="Biocurator ID"
        [lines]="[
          'Use this button to set the researcher identifier (ORCID).',
          'See https://orcid.org/ for more information.'
        ]" />
    </div>
    <span class="text-sm text-gray-500 italic">{{ biocuratorOrcid() }}</span>
</div>


</div>
</div>

