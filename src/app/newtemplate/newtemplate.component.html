@if (showSuccessMessage) {
  <div class="p-6 text-center">
    <p class="text-green-700 text-lg font-semibold mb-4">âœ” Submission successful!</p>

    <p class="text-sm text-gray-700 mb-2">
      You can now continue with:
    </p>

    <div class="flex justify-center gap-4">
      <a routerLink="/tableeditor" 
          routerLinkActive="bg-gray-700 font-semibold"
          [routerLinkActiveOptions]="{ exact: true }"
          class="text-blue-600 hover:underline">External Table Editor</a>

      <a
          routerLink="/addcase"
          routerLinkActive="bg-gray-700 font-semibold"
          [routerLinkActiveOptions]="{ exact: true }"
          class="text-blue-600 hover:underline"
        >
        Add new phenopacket</a>
    </div>
  </div>
} @else {
  <div class="w-full px-[5%] p-6">
    <h1 class="h1-primary">Create new phenopacket cohort template</h1>
    <p>Choose type of cohort and then enter relevant information to create a new cohort. After the information has been added, you will be ask to choose a file location to store the template.</p>
    </div>
   
  @if (errorMessage) {
    <div class="error-container">
      <p class="error-message">{{ errorMessage }}</p>
    </div>
  }
 <div class="flex flex-col items-center justify-center gap-4 w-full mt-[70px]">
  
  <div class="flex items-center gap-2">
   
    <button
      (click)="mendelian()"
      [disabled]="meldedTemplate || digenicTemplate"
      class="btn-outline-primary w-[300px]"
    >
      Mendelian
    </button>
    <app-help-button 
      title="Mendelian Template"
      class="w-8"
      [lines]="[ 'A Mendelian disease is a disorder caused by mutations in a single gene and inherited according to classic Mendelian patterns such as autosomal dominant, autosomal recessive, or X-linked inheritance.',]" />
  </div>

  <div class="flex items-center gap-2">
    <button
      (click)="melded()"
      [disabled]="mendelianTemplate || digenicTemplate"
      class="btn-outline-primary w-[300px]"
    >
      Melded (Dual)
    </button>
    <app-help-button 
      title="Melded (Dual) Diagnosis"
      class="w-8"
      [lines]="[ 'A melded phenotype is a clinical presentation resulting from two or more independent genetic diagnoses in the same individual, where features from each condition combine to produce a blended or overlapping phenotype.',
        'You will need to enter disease/gene information for each of the two conditions'
      ]" />
  </div>

  <div class="flex items-center gap-2">
    <button
      (click)="digenic()"
      [disabled]="mendelianTemplate || meldedTemplate"
      class="btn-outline-primary w-[300px]"
    >
      Digenic
    </button>
    <app-help-button 
      title="Digenic Inheritance"
      class="w-8"
      [lines]="[ 'A digenic disease is a disorder in which pathogenic variants in two specific genes are both required to cause the disease phenotype in an individual.',
            'Support for digenic disease curation has not yet been implemented in phenoboard.']" />
  </div>
</div>


  @if (thisCohortType) {
   <div class="template-section">
    <p class="section-header">ðŸ§¬ {{thisCohortType}} cohort</p>
    @if (diseaseA) {
      <div class="summary-card">
        <table class="min-w-full border border-gray-300 rounded-md">
          <tbody>
            <tr>
              <td class="font-semibold p-2 bg-gray-50">Disease ID</td>
              <td class="p-2">{{ diseaseA.diseaseId }}</td>
            </tr>
            <tr>
              <td class="font-semibold p-2 bg-gray-50">Disease Label</td>
              <td class="p-2">{{ diseaseA.diseaseLabel }}</td>
            </tr>
            <tr>
              <td class="font-semibold p-2 bg-gray-50">Cohort acronym</td>
              <td class="p-2">{{ pendingCohort?.cohortAcronym }}</td>
            </tr>
            <tr>
              <td class="font-semibold p-2 bg-gray-50">Gene(s)</td>
              <td class="p-2">
                <table class="border border-gray-200 w-full text-sm">
                  <thead>
                    <tr class="bg-gray-100">
                      <th class="p-1 text-left">Symbol</th>
                      <th class="p-1 text-left">HGNC ID</th>
                      <th class="p-1 text-left">Transcript</th>
                    </tr>
                  </thead>
                  <tbody>
                    @for (gene of diseaseA.geneTranscriptList; track gene) {
                      <tr>
                        <td class="p-1">{{ gene.geneSymbol }}</td>
                        <td class="p-1">{{ gene.hgncId }}</td>
                        <td class="p-1">{{ gene.transcript }}</td>
                      </tr>
                    }
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
         @if (diseaseB) {
          <table class="min-w-full border border-gray-300 rounded-md">
          <tbody>
            <tr>
              <td class="font-semibold p-2 bg-gray-50">Disease ID</td>
              <td class="p-2">{{ diseaseB.diseaseId }}</td>
            </tr>
            <tr>
              <td class="font-semibold p-2 bg-gray-50">Disease Label</td>
              <td class="p-2">{{ diseaseB.diseaseLabel }}</td>
            </tr>
            <tr>
              <td class="font-semibold p-2 bg-gray-50">Gene(s)</td>
              <td class="p-2">
                <table class="border border-gray-200 w-full text-sm">
                  <thead>
                    <tr class="bg-gray-100">
                      <th class="p-1 text-left">Symbol</th>
                      <th class="p-1 text-left">HGNC ID</th>
                      <th class="p-1 text-left">Transcript</th>
                    </tr>
                  </thead>
                  <tbody>
                    @for (gene of diseaseB.geneTranscriptList; track gene) {
                      <tr>
                        <td class="p-1">{{ gene.geneSymbol }}</td>
                        <td class="p-1">{{ gene.hgncId }}</td>
                        <td class="p-1">{{ gene.transcript }}</td>
                      </tr>
                    }
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="flex justify-end gap-2 mt-4">
          <button class="btn-outline-cancel" (click)="resetCohort()">Reset</button>
          <button class="btn-outline-primary" (click)="onConfirm()">Next</button>
        </div>
     
         }
 </div>
  

      <div class="actions">
        <button mat-stroked-button color="warn" (click)="resetCohort()" class="btn-outline-cancel">
          Reset
        </button>
        <button mat-raised-button color="primary" (click)="onConfirm()" class="btn-outline-primary">
          Confirm and Continue â†’
        </button>
      </div>
    } @else {
      <div class="warning-message">
        <p>Please complete all required fields before proceeding.</p>
      </div>
       <button mat-stroked-button color="warn" (click)="resetCohort()">
          Reset
        </button>
    }
  </div>
  } @else if (meldedTemplate) {
    <p>Melded template not implemented</p>
  } @else if (digenicTemplate) {
    <p>Digenic template not implemented</p>
  }
  

} 



