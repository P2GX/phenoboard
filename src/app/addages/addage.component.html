<h2 mat-dialog-title class="font-bold text-black border-b pb-2">Select Age</h2>

<mat-dialog-content class="!pt-4">
  <div class="flex flex-col gap-6">
    
    <div class="flex flex-col gap-2">
      <label class="text-[11px] font-bold uppercase text-gray-500 tracking-tight">Choose Existing</label>
      <div class="flex flex-wrap gap-2 max-h-[120px] overflow-y-auto p-1 custom-scrollbar">
        @for (term of existingAgeStrings(); track term) {
          <button 
            type="button"
            (click)="selectExisting(term)"
            class="px-3 py-1 text-sm font-medium bg-gray-100 hover:bg-blue-600 hover:text-white border border-gray-300 rounded-full transition-all text-black">
            {{ term }}
          </button>
        }
      </div>
    </div>

    <div class="relative flex py-2 items-center">
        <div class="flex-grow border-t border-gray-300"></div>
        <span class="flex-shrink mx-4 text-gray-400 text-[10px] font-bold">OR CREATE NEW</span>
        <div class="flex-grow border-t border-gray-300"></div>
    </div>

    <div class="flex items-start gap-2">
      <mat-form-field appearance="outline" class="flex-grow dense-form-field">
        <mat-label>New Age String</mat-label>
        <input matInput 
               [ngModel]="customAge()" 
               (ngModelChange)="customAge.set($event)"
               [matAutocomplete]="auto"
               (keyup.enter)="createNewAge()"
               placeholder="e.g. P35Y">
      </mat-form-field>
      <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectExisting($event.option.value)">
            @for (term of filteredTerms(); track term) {
              <mat-option [value]="term">{{ term }}</mat-option>
            }
        </mat-autocomplete>
      
      <button mat-flat-button color="primary" 
              class="h-[48px]"
              (click)="createNewAge()" 
              [disabled]="!customAge()">
        Use
      </button>
    </div>

  </div>
</mat-dialog-content>

<mat-dialog-actions align="end" class="!pb-4">
  <button mat-button (click)="onCancel()" class="btn-outline-cancel">Cancel</button>
</mat-dialog-actions>