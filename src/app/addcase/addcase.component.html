<div class="w-full px-[5%]">
<div style="margin: 16px 0;">
  @if (!pmidDto || !pmidDto.title) {
    <!-- Show lookup button when no successful result -->
    <button (click)="openPubmedDialog()" class="btn-outline-primary">üîç Lookup PubMed</button>
  } @else {
    <!-- Show result box with reset button when successful -->
    <div style="padding: 12px; background-color: #f8f9fa; border: 1px solid #e9ecef; border-radius: 4px;">
      <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <div style="flex: 1;">
          <div style="font-size: 14px; line-height: 1.4; margin-bottom: 4px;">
            {{ pmidDto.title }}
          </div>
          <div class="text-xs" style="color: #666;">
            {{ pmidDto.pmid }}
          </div>
        </div>
        <button 
          (click)="resetPmidDto()" 
          class="btn-outline-primary" 
          style="margin-left: 12px; padding: 4px 8px; font-size: 12px;">
          Reset
        </button>
      </div>
    </div>
  }
</div>


  @if (showAgeEntryArea) {
    <app-addages #addagesComponent></app-addages>
  }
  <app-adddemo #adddemoComponent (demoSubmitted)="handleDemographicData($event)"></app-adddemo>

  @if (showTwoStepHpoButton) {
     <div class="space-y-4 p-1 border rounded-md text-sm text-gray-500">
  <button mat-flat-button color="primary" (click)="openHpoTwoStepDialog()">
    Test 2 step HPO Annotation
  </button>
  </div>
} @else {
  <div class="flex items-center justify-between p-2 border rounded bg-gray-50">
  <div class="flex flex-wrap gap-1 text-sm text-gray-500">
    <span *ngFor="let annot of hpoAnnotations">
      {{ annot.termDuplet.hpoLabel }}: {{annot.entry}}
    </span>
  </div>

  <button
    class="text-xs text-gray-600 hover:text-gray-800"
    (click)="resetAnnotations()"
  >
    Reset
  </button>
</div>
}




<!-- ALLELE 1 -->
<div class="flex items-center gap-4 w-full">
  <button button (click)="openAddAllele1Dialog()" class="btn-outline-primary">Add Allele 1</button>
  @if (allele1 != null){
  <span class="flex items-center gap-2 text-sm text-gray-700">
    <span
      class="inline-block w-2.5 h-2.5 rounded-full"
      [ngClass]="{
        'bg-green-500': true,
        'bg-red-500': false
      }"
    ></span>
    {{ allele1.variantString }} ({{allele1.geneSymbol}})
    <button mat-icon-button 
            (click)="allele1 = null" 
            aria-label="Clear variant" 
            class="flex-shrink p-0 w-5 h-5">
      <mat-icon>close</mat-icon>
    </button>
  </span>
  } @else {
   <p class="text-gray-400">na</p>
   }
</div>
<!-- ALLELE 2 -->
<div class="flex items-center gap-4 w-full">
  <button button (click)="openAddAllele1Dialog()" class="btn-outline-primary">Add Allele 2</button>
  @if (allele2) {
    <span class="flex items-center gap-2 text-sm text-gray-700">
      <span
          class="inline-block w-2.5 h-2.5 rounded-full"
          [ngClass]="{
            'bg-green-500': true,
            'bg-red-500': false
          }"
      ></span>
      {{ allele2.variantString }} ({{allele2.geneSymbol}})
      @if (!allele2) {
      <button mat-icon-button 
          (click)="allele2 = null" 
          aria-label="Clear variant" 
          class="flex-shrink p-0 w-5 h-5">
          <mat-icon>close</mat-icon>
        </button>
      }
    </span>
    }
    @if (!allele2) { <p class="text-gray-400">na</p> }
</div>

<div class="space-y-1">
    <button
      (click)="submitNewRow()"
      class="btn-outline-primary"
    >Submit row</button>
</div>

