<div class="border rounded-lg overflow-hidden bg-white shadow-sm mb-6">
  <table mat-table [dataSource]="concepts()" class="w-full">
    
    <ng-container matColumnDef="source">
      <th mat-header-cell *matHeaderCellDef> Fragment </th>
      <td mat-cell *matCellDef="let c">
        <code class="text-blue-700 font-bold bg-blue-50 px-2 py-1 rounded">
          {{ c.originalText }}
        </code>
      </td>
    </ng-container>

    <ng-container matColumnDef="mapping">
      <th mat-header-cell *matHeaderCellDef> HPO Terms </th>
      <td mat-cell *matCellDef="let c">
        <div class="flex flex-wrap gap-1">
          @for (term of c.suggestedTerms; track term.id) {
            <mat-chip class="hpo-chip-small">{{ term.label }}</mat-chip>
          }
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Status </th>
      <td mat-cell *matCellDef="let c" class="px-2">
        <mat-button-toggle-group 
          [value]="c.clinicalStatus"
          (change)="updateStatus(c, $event.value)"
          class="compact-toggle-group">
          <mat-button-toggle value="observed">observed</mat-button-toggle>
          <mat-button-toggle value="excluded">excluded</mat-button-toggle>
          <mat-button-toggle value="na">na</mat-button-toggle>
        </mat-button-toggle-group>
      </td>
    </ng-container>

    <ng-container matColumnDef="onset">
      <th mat-header-cell *matHeaderCellDef> Age of Onset </th>
      <td mat-cell *matCellDef="let c">
         ...
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['source', 'mapping', 'status', 'onset']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['source', 'mapping', 'status', 'onset'];"></tr>
  </table> </div> <div class="p-4 border border-dashed rounded-lg bg-slate-50/50">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-[11px] font-bold text-slate-500 uppercase tracking-widest">
      Absent in this cell (Quick Exclude)
    </h3>
  </div>

  <div class="flex flex-wrap gap-1.5">
    @for (concept of absentConcepts(); track concept.originalText) {
      <button 
        type="button"
        (click)="toggleExclude(concept)"
        class="absent-badge">
        {{ concept.originalText }}
      </button>
    }
  </div>
</div>